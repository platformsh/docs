<!-- Tabbed content -->

<!-- Shortcode separator strings -->
{{ $splitTabs := "<--->"}}
{{ $splitContent := "<->"}}

<div class="tabs">

  <!-- Create a randomID string, to keep multiple tabs on a single page from interacting -->
  {{ $randomID := ( index ( split ( index ( split ( now.AddDate -2 0 0 ) " ") 1 ) "." ) 1 ) }}

  <!-- Buttons -->
    <ul class="nav nav-pills nav-justified" id="pills-tab" role="tablist">
      {{ $ariaselected := "true" }}
      {{ $tabclass := "nav-link active"}}
      {{ $id := 0 }}
      {{ range split .Inner $splitTabs }}
        <li class="nav-item">
          <a class="{{ $tabclass }}" id="{{ printf "pills-tab-%s" ( string $id )}}" data-toggle="pill" href="{{ printf "#pills-%s-content-%s" $randomID ( string $id )}}" role="tab" aria-controls="{{ printf "pills-tab-%s" ( string $id )}}" aria-selected="{{ $ariaselected }}">
            {{ $splitcontent := split . $splitContent }}
            {{ ( index $splitcontent 0 ) | markdownify }}
          </a>
        </li>
        {{ $id = add $id 1 }}
        {{ if eq $ariaselected "true" }}
          {{ $ariaselected = "false"}}
        {{ end }}
        {{ if eq $tabclass "nav-link active" }}
          {{ $tabclass = "nav-link"}}
        {{ end }}
      {{ end }}

    </ul>

    <!-- Content -->
    <div class="tab-content" id="pills-tabContent">

      {{ $contentclass := "tab-pane fade show active"}}
      {{ $contentid := 0 }}

      {{ range split .Inner $splitTabs }}

        <!-- Handle the content types -->
        {{ $splitcontent := split . $splitContent }}
        {{ $content := ( index $splitcontent 1 ) }}

        <!-- Match background for code-only tab-content -->
        {{ if eq ( slicestr (string $content ) 2 5) "```" }}
          {{ $contentclass = printf "%s code-only" $contentclass }}
        {{ end }}

        <div class="{{ $contentclass }}" id="{{ printf "pills-%s-content-%s" $randomID ( string $contentid )}}" role="tabpanel" aria-labelledby="{{ printf "pills-tab-%s" ( string $contentid )}}">
          {{ $content | markdownify}}
        </div>

        <!-- Increment the tab ID -->
        {{ $contentid = add $contentid 1 }}

        <!-- Reset the contentclass -->
        {{ $contentclass = "tab-pane fade"}}


      {{ end }}

    </div>
</div>
